/* @license GNU-GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function(Drupal){'use strict';function recalculateProgramsSelect(context){let programs=[],distribution=context.querySelector('.distribution'),articles=distribution.querySelectorAll('.view-program article'),programList=distribution.querySelectorAll('.view-program .list'),areas=[];if(articles.length>0)for(let i=0;i<articles.length;i++){let article=articles[i];programs.push(article.getAttribute('data-nid'));areas.push(article.getAttribute('data-idarea'));}else if(programList.length>0)for(let i=0;i<programList.length;i++){let program=programList[i];programs.push(program.getAttribute('data-nid'));}else return;};})(Drupal);;
(function($,Drupal,once){'use strict';var hasLocalStorage=(function(){try{localStorage.setItem('webform','webform');localStorage.removeItem('webform');return true;}catch(e){return false;}}());var hasSessionStorage=(function(){try{sessionStorage.setItem('webform','webform');sessionStorage.removeItem('webform');return true;}catch(e){return false;}}());Drupal.behaviors.webformMessageClose={attach:function(context){$(once('webform-message--close','.js-webform-message--close',context)).each(function(){var $element=$(this);var id=$element.attr('data-message-id');var storage=$element.attr('data-message-storage');var effect=$element.attr('data-message-close-effect')||'hide';switch(effect){case 'slide':effect='slideUp';break;case 'fade':effect='fadeOut';break;}if(isClosed($element,storage,id))return;if($element.attr('style')!=='display: none;'&&!$element.hasClass('js-webform-states-hidden'))$element.show();$element.find('.js-webform-message__link').on('click',function(event){$element[effect]();setClosed($element,storage,id);$element.trigger('close');event.preventDefault();});});}};function isClosed($element,storage,id){if(!id||!storage)return false;switch(storage){case 'local':if(hasLocalStorage)return localStorage.getItem('Drupal.webform.message.'+id)||false;return false;case 'session':if(hasSessionStorage)return sessionStorage.getItem('Drupal.webform.message.'+id)||false;return false;default:return false;}}function setClosed($element,storage,id){if(!id||!storage)return;switch(storage){case 'local':if(hasLocalStorage)localStorage.setItem('Drupal.webform.message.'+id,true);break;case 'session':if(hasSessionStorage)sessionStorage.setItem('Drupal.webform.message.'+id,true);break;case 'user':case 'state':case 'custom':$.get($element.find('.js-webform-message__link').attr('href'));return true;}}})(jQuery,Drupal,once);;
(function(Drupal,drupalSettings){Drupal.behaviors.recaptcha={attach:function(context,settings){let checkExist=setInterval(function(){if(document.querySelector('.grecaptcha-badge')!=null){let cssVar=getComputedStyle(document.body),recaptcha=document.querySelector('.grecaptcha-badge'),stickyContent=document.querySelector('[data-sticky-content]'),isDesk=function(){if(window.outerWidth>=cssVar.getPropertyValue('--lg'))return true;},currentScrollTop=window.scrollTop,windowHeight=window.innerHeight,documentHeight=document.innerHeight,isBottom=currentScrollTop+windowHeight>=documentHeight,isTop=currentScrollTop==0;if(!isDesk()){if(!isBottom)recaptcha.classList.remove('hidden');else recaptcha.classList.add('hidden');if(isTop&&stickyContent.length)setTimeout(function(){recaptcha.style.bottom="14px";},300);else{let stickyContentHeight=(stickyContent.offsetHeight+10)+'px';setTimeout(function(){recaptcha.style.bottom=stickyContentHeight;},300);}}window.addEventListener('resize',function(){if(stickyContent.length)if(!isDesk()){let stickyContentHeight=(stickyContent.offsetHeight+10)+'px';recaptcha.style.bottom=stickyContentHeight;}else recaptcha.style.bottom="14px";});window.addEventListener('scroll',function(){let currentScrollTop=window.scrollTop,windowHeight=window.innerHeight,documentHeight=document.innerHeight,isBottom=currentScrollTop+windowHeight>=documentHeight,isTop=currentScrollTop==0;if(!isDesk()){if(!isBottom)recaptcha.classList.remove('hidden');else recaptcha.classList.add('hidden');if(isTop&&stickyContent.length)recaptcha.style.bottom="14px";else{let stickyContentHeight=(stickyContent.offsetHeight+10)+'px';recaptcha.style.bottom=stickyContentHeight;}}});clearInterval(checkExist);}},25);}};})(Drupal,drupalSettings);;
(function(Drupal){'use strict';Drupal.behaviors.webform_material={attach:function(context,settings){let webforms=document.querySelectorAll('.webform-submission-form');function checkFieldStatus(field){const fieldParent=field.closest('.form-item');if(field.value)fieldParent.classList.add('active');else fieldParent.classList.remove('active');}webforms.forEach((form)=>{if(!form.classList.contains('webform-material')){const filleableInput=Array.from(form.querySelectorAll('input:not([type="hidden"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]), textarea'));filleableInput.forEach((input)=>{checkFieldStatus(input);input.addEventListener('focus',()=>{if(!input.value)input.closest('.form-item').classList.add('active');});input.addEventListener('blur',()=>{checkFieldStatus(input);});});form.classList.add('webform-material');}});}};})(Drupal);;
(function(Drupal){'use strict';Drupal.behaviors.forms_validation={attach:function(context,settings){const fieldTypeToTrim=["text","email","textarea","tel"];function checkValid(field){return field.validity.valid===true;}function checkingField(field){let statusValidity=true;if(field!==null&&field.length!==0){if(field.getAttribute('required')===null)return;let errorAttr=field.getAttribute('data-webform-required-error');let errorPattern=field.getAttribute('data-webform-pattern-error');let errorMessage=errorAttr?errorAttr:(errorPattern||Drupal.t("Introduce un valor v√°lido"));let errorBox=field.closest('.form-item').querySelector('.error-box')??null;if(field.validity.valid){field.classList.remove('unfilled-field');if(errorBox){errorBox.classList.remove('error-box--visible');errorBox.innerHTML='';}field.classList.remove('field-error');field.classList.remove('first-required');statusValidity=true;}else{if(!field.validity.valueMissing){field.classList.add('unfilled-field');errorBox.textContent=errorMessage;errorBox.classList.add('error-box--visible');field.classList.add('field-error');statusValidity=false;}}}return statusValidity;};function checkingFieldChange(field){if(field!==null&&field.length!==0){if(field.getAttribute('required')===null)return;let errorBox=field.closest('.form-item').querySelector('.error-box');if(field.validity.valid){field.classList.remove('unfilled-field');errorBox.classList.remove('error-box--visible');errorBox.innerHTML='';field.classList.remove('field-error');field.classList.remove('first-required');}}};let updateSubmitStatus=function(field){let formElement=field.closest('.webform-submission-form');if(formElement){let allRequiredSiblingsPassesNodeList=formElement.querySelectorAll('[required]'),allRequiredSiblingsPasses=Array.from(allRequiredSiblingsPassesNodeList).every(checkValid),submitButton=formElement.querySelector('[type="submit"]');if(allRequiredSiblingsPasses)submitButton.removeAttribute('disabled');else submitButton.setAttribute('disabled',true);}};let forms=document.querySelectorAll('.webform-submission-form');let allRequired,allRequiredValid,submitButton;forms.forEach(function(form){let submit=form.querySelector('[type="submit"]');submit.setAttribute('disabled',true);allRequired=Array.from(form.querySelectorAll('[required]'));allRequiredValid=allRequired.every(checkValid);submitButton=form.querySelector('[type="submit"]');for(var j=0;j<allRequired.length;j++){allRequired[j].classList.add("unfilled-field");let nodeName=allRequired[j].nodeName;let elementNAme=allRequired[j].name;if(nodeName==='SELECT'&&(elementNAme.includes('_interested')||elementNAme.includes('_knowledge_areas')))allRequired[j].addEventListener("change",function(event){let field=event.target;const send=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){this.addEventListener('load',function(){let responseURL=this.responseURL;if(responseURL.includes('ajax_form'))updateSubmitStatus(field);});return send.apply(this,arguments);};});else allRequired[j].addEventListener("keyup",function(event){let field=event.target;if(field.nodeName!=='DIV'){checkingFieldChange(field);updateSubmitStatus(field);}});};form.addEventListener("change",function(event){let field=event.target;let elementTag=field.tagName;let check=false;if(field.nodeName!=='DIV')check=true;if(elementTag==='SELECT')check=true;if(check)updateSubmitStatus(field);},false);form.addEventListener("blur",function(event){let element=event.target;let allFieldRequired;const fieldType=element.type;if(fieldTypeToTrim.includes(fieldType)){const trimmedValue=element.value.trim();element.value=trimmedValue;}if(element.classList.contains('ss-main')||element.parentElement.classList.contains('ss-search'))return;if(element.nodeName!=='DIV'){allFieldRequired=element.closest('.webform-submission-form').querySelectorAll('[required]');updateSubmitStatus(element);}else allFieldRequired=element.querySelectorAll('[required]');for(let k=0;k<allFieldRequired.length;k++)if(!checkingField(allFieldRequired[k]))break;},true);let check_legal_input=form.querySelector('[data-drupal-selector="edit-legal-check"]');if(check_legal_input)check_legal_input.addEventListener("change",function(){let errorBox=check_legal_input.closest('.form-item').querySelector('.error-box');if(!this.checked){check_legal_input.classList.add('unfilled-field');errorBox.textContent=check_legal_input.getAttribute("legal_check_error_display");errorBox.classList.add('error-box--visible');field.classList.add('field-error');}else{check_legal_input.classList.remove('unfilled-field');errorBox.classList.remove('error-box--visible');errorBox.innerHTML='';check_legal_input.classList.remove('field-error');check_legal_input.classList.remove('first-required');}});form.addEventListener("submit",function(event){let allRequiredValidNodeList=Array.from(form.querySelectorAll('[required]'));let allRequiredValid=allRequiredValidNodeList.every(checkValid);if(allRequiredValid){submitButton.setAttribute('disabled',true);submitButton.value=Drupal.t('Enviando...');}});});}};})(Drupal,drupalSettings);;
